{"posts":[{"title":"简单策略实现2020年超越沪深500指数","content":"策略 简单YY了一个追涨策略，核心思路是维护一个仓位池，每10天调整一次仓位，每次出一只股票，入一只股票。出股票的依据是选择（前日收盘-购买前日收盘价格）即预期获利最高的一只，入股票的一句是抓取每日涨停强度最高的股票。 class Trend: def __init__(self): self.pool = {} self.last_change = 0 def keep_pool(self, info: PortfolioInfo): codes = list(self.pool.keys()) avail_cash = info.avail_cash if len(codes) &gt; 10: codes.sort(key=lambda k: Util.get_price(k).close(info.date)-self.pool[k], reverse=True) logging.info('选出池子：%s' % codes[0]) info.order_by_cash(codes[0], -99999999) avail_cash += info.position[codes[0]]['value'] del(self.pool[codes[0]]) stop = Stop(info.date) stop.df.sort_values(by='strth', ascending=False) df = stop.df code_list = list(df.loc[df['limit'] == 'U']['ts_code']) for code in code_list: if code not in self.pool: p = Util.get_price(code) self.pool[code] = p.close(info.date) logging.info('选入池子：%s' % code) info.order_by_cash(code, avail_cash*0.2) return return def on_close(self, info: PortfolioInfo): self.last_change += 1 if self.last_change == 10: self.keep_pool(info) self.last_change = 1 回测表现 /Users/lizile/PycharmProjects/quant/venv/bin/python /Users/lizile/PycharmProjects/quant/main.py 2021-02-14 23:02:01,041 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200103', 'cash': 1000000, 'stock': 0, 'total': 1000000, 'rate': 0.0, 'base': 0.02206148282097664} 2021-02-14 23:02:01,046 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200106', 'cash': 1000000, 'stock': 0, 'total': 1000000, 'rate': 0.0, 'base': 0.034358047016274984} 2021-02-14 23:02:01,051 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200107', 'cash': 1000000, 'stock': 0, 'total': 1000000, 'rate': 0.0, 'base': 0.04448462929475583} 2021-02-14 23:02:01,055 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200108', 'cash': 1000000, 'stock': 0, 'total': 1000000, 'rate': 0.0, 'base': 0.04376130198915007} 2021-02-14 23:02:01,059 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200109', 'cash': 1000000, 'stock': 0, 'total': 1000000, 'rate': 0.0, 'base': 0.05063291139240511} 2021-02-14 23:02:01,064 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200110', 'cash': 1000000, 'stock': 0, 'total': 1000000, 'rate': 0.0, 'base': 0.04846292947558761} 2021-02-14 23:02:01,068 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200113', 'cash': 1000000, 'stock': 0, 'total': 1000000, 'rate': 0.0, 'base': 0.07450271247739604} 2021-02-14 23:02:01,072 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200114', 'cash': 1000000, 'stock': 0, 'total': 1000000, 'rate': 0.0, 'base': 0.06618444846292948} 2021-02-14 23:02:01,077 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200115', 'cash': 1000000, 'stock': 0, 'total': 1000000, 'rate': 0.0, 'base': 0.06075949367088618} 2021-02-14 23:02:01,309 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：002971.SZ 2021-02-14 23:02:01,310 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '002971.SZ', 'cash': 200000.0}交易成功,买入106手,花去199859.952500 2021-02-14 23:02:01,316 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200116', 'cash': 800140.0475, 'stock': 219844.0, 'total': 1019984.0475, 'rate': 0.019984047499999935, 'base': 0.06690777576853524} 2021-02-14 23:02:01,322 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200117', 'cash': 800140.0475, 'stock': 241785.99999999997, 'total': 1041926.0475, 'rate': 0.04192604750000006, 'base': 0.06654611211573247} 2021-02-14 23:02:01,328 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200120', 'cash': 800140.0475, 'stock': 265954.0, 'total': 1066094.0474999999, 'rate': 0.06609404749999981, 'base': 0.06654611211573247} 2021-02-14 23:02:01,334 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200121', 'cash': 800140.0475, 'stock': 292560.00000000006, 'total': 1092700.0475, 'rate': 0.09270004750000016, 'base': 0.04665461121157333} 2021-02-14 23:02:01,340 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200122', 'cash': 800140.0475, 'stock': 267756.0, 'total': 1067896.0474999999, 'rate': 0.06789604749999989, 'base': 0.04954792043399636} 2021-02-14 23:02:01,345 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200123', 'cash': 800140.0475, 'stock': 267862.0, 'total': 1068002.0474999999, 'rate': 0.06800204749999983, 'base': 0.023869801084990927} 2021-02-14 23:02:01,350 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200203', 'cash': 800140.0475, 'stock': 285458.0, 'total': 1085598.0474999999, 'rate': 0.08559804749999977, 'base': -0.09113924050632916} 2021-02-14 23:02:01,355 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200204', 'cash': 800140.0475, 'stock': 313972.0, 'total': 1114112.0474999999, 'rate': 0.11411204749999992, 'base': -0.04810126582278473} 2021-02-14 23:02:01,361 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200205', 'cash': 800140.0475, 'stock': 315032.0, 'total': 1115172.0474999999, 'rate': 0.11517204749999976, 'base': -0.033273056057866124} 2021-02-14 23:02:01,879 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：000652.SZ 2021-02-14 23:02:01,880 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '000652.SZ', 'cash': 160028.00950000001}交易成功,买入236手,花去159811.943000 2021-02-14 23:02:01,886 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200206', 'cash': 640328.1045, 'stock': 492336.0, 'total': 1132664.1045, 'rate': 0.13266410449999988, 'base': -0.027486437613019832} 2021-02-14 23:02:01,893 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200207', 'cash': 640328.1045, 'stock': 522332.0, 'total': 1162660.1045, 'rate': 0.1626601044999998, 'base': -0.018444846292947514} 2021-02-14 23:02:01,900 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200210', 'cash': 640328.1045, 'stock': 574544.0, 'total': 1214872.1045, 'rate': 0.21487210449999994, 'base': 0.006509945750452051} 2021-02-14 23:02:01,907 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200211', 'cash': 640328.1045, 'stock': 559964.0, 'total': 1200292.1045, 'rate': 0.2002921044999999, 'base': 0.008318264014466559} 2021-02-14 23:02:01,913 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200212', 'cash': 640328.1045, 'stock': 532570.0, 'total': 1172898.1045, 'rate': 0.17289810449999998, 'base': 0.027848101265822933} 2021-02-14 23:02:01,920 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200213', 'cash': 640328.1045, 'stock': 521908.0, 'total': 1162236.1045, 'rate': 0.1622361044999998, 'base': 0.009041591320072317} 2021-02-14 23:02:01,926 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200214', 'cash': 640328.1045, 'stock': 486274.0, 'total': 1126602.1045, 'rate': 0.12660210449999987, 'base': 0.0075949367088608} 2021-02-14 23:02:01,932 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200217', 'cash': 640328.1045, 'stock': 486106.0, 'total': 1126434.1045, 'rate': 0.12643410449999992, 'base': 0.0075949367088608} 2021-02-14 23:02:01,937 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200218', 'cash': 640328.1045, 'stock': 503300.0, 'total': 1143628.1045, 'rate': 0.14362810449999985, 'base': 0.05280289330922239} 2021-02-14 23:02:02,205 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：000953.SZ 2021-02-14 23:02:02,206 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '000953.SZ', 'cash': 128065.62090000001}交易成功,买入262手,花去127625.898500 2021-02-14 23:02:02,213 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200219', 'cash': 512702.206, 'stock': 613100.0, 'total': 1125802.206, 'rate': 0.12580220599999992, 'base': 0.04412296564195306} 2021-02-14 23:02:02,222 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200220', 'cash': 512702.206, 'stock': 603052.0, 'total': 1115754.206, 'rate': 0.11575420600000008, 'base': 0.04846292947558761} 2021-02-14 23:02:02,230 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200221', 'cash': 512702.206, 'stock': 618916.0, 'total': 1131618.206, 'rate': 0.13161820599999996, 'base': 0.07088607594936702} 2021-02-14 23:02:02,238 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200224', 'cash': 512702.206, 'stock': 652466.0, 'total': 1165168.206, 'rate': 0.16516820599999993, 'base': 0.05895117540687167} 2021-02-14 23:02:02,245 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200225', 'cash': 512702.206, 'stock': 665614.0, 'total': 1178316.206, 'rate': 0.1783162060000001, 'base': 0.07920433996383358} 2021-02-14 23:02:02,253 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200226', 'cash': 512702.206, 'stock': 664244.0, 'total': 1176946.206, 'rate': 0.176946206, 'base': 0.06835443037974676} 2021-02-14 23:02:02,260 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200227', 'cash': 512702.206, 'stock': 652912.0, 'total': 1165614.206, 'rate': 0.1656142060000001, 'base': 0.06546112115732372} 2021-02-14 23:02:02,266 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200228', 'cash': 512702.206, 'stock': 645712.0, 'total': 1158414.206, 'rate': 0.158414206, 'base': 0.024593128390596686} 2021-02-14 23:02:02,272 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200302', 'cash': 512702.206, 'stock': 676616.0, 'total': 1189318.206, 'rate': 0.18931820600000004, 'base': 0.07305605786618452} 2021-02-14 23:02:02,584 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：300683.SZ 2021-02-14 23:02:02,585 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '300683.SZ', 'cash': 102540.4412}交易成功,买入26手,花去102439.603500 2021-02-14 23:02:02,594 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200303', 'cash': 410262.60250000004, 'stock': 794728.0, 'total': 1204990.6025, 'rate': 0.20499060250000012, 'base': 0.07016274864376126} 2021-02-14 23:02:02,606 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200304', 'cash': 410262.60250000004, 'stock': 834602.0, 'total': 1244864.6025, 'rate': 0.24486460250000008, 'base': 0.08969258589511764} 2021-02-14 23:02:02,618 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200305', 'cash': 410262.60250000004, 'stock': 837264.0, 'total': 1247526.6025, 'rate': 0.24752660250000003, 'base': 0.08245931283905983} 2021-02-14 23:02:02,629 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200306', 'cash': 410262.60250000004, 'stock': 878236.0, 'total': 1288498.6025, 'rate': 0.28849860250000003, 'base': 0.06835443037974676} 2021-02-14 23:02:02,641 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200309', 'cash': 410262.60250000004, 'stock': 911760.0, 'total': 1322022.6025, 'rate': 0.32202260250000014, 'base': 0.032188065099457486} 2021-02-14 23:02:02,653 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200310', 'cash': 410262.60250000004, 'stock': 911628.0, 'total': 1321890.6025, 'rate': 0.3218906025000001, 'base': 0.08788426763110313} 2021-02-14 23:02:02,664 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200311', 'cash': 410262.60250000004, 'stock': 920094.0, 'total': 1330356.6025, 'rate': 0.3303566025, 'base': 0.0433996383363473} 2021-02-14 23:02:02,675 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200312', 'cash': 410262.60250000004, 'stock': 906648.0, 'total': 1316910.6025, 'rate': 0.31691060250000014, 'base': -0.016274864376130127} 2021-02-14 23:02:02,684 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200313', 'cash': 410262.60250000004, 'stock': 839486.0, 'total': 1249748.6025, 'rate': 0.24974860249999997, 'base': 0.027486437613019943} 2021-02-14 23:02:02,908 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：300821.SZ 2021-02-14 23:02:02,909 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '300821.SZ', 'cash': 82052.52050000001}交易成功,买入75手,花去81995.493750 2021-02-14 23:02:02,917 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200316', 'cash': 328267.10875, 'stock': 949390.0, 'total': 1277657.1087500001, 'rate': 0.27765710875000016, 'base': -0.07920433996383358} 2021-02-14 23:02:02,928 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200317', 'cash': 328267.10875, 'stock': 935546.0, 'total': 1263813.1087500001, 'rate': 0.2638131087500002, 'base': -0.02857142857142858} 2021-02-14 23:02:02,940 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200318', 'cash': 328267.10875, 'stock': 946176.0, 'total': 1274443.1087500001, 'rate': 0.2744431087500001, 'base': -0.07811934900542494} 2021-02-14 23:02:02,950 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200319', 'cash': 328267.10875, 'stock': 907743.0, 'total': 1236010.1087500001, 'rate': 0.23601010875000017, 'base': -0.040144665461121165} 2021-02-14 23:02:02,960 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200320', 'cash': 328267.10875, 'stock': 901687.0, 'total': 1229954.1087500001, 'rate': 0.2299541087500001, 'base': -0.07341772151898729} 2021-02-14 23:02:02,970 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200323', 'cash': 328267.10875, 'stock': 850632.0, 'total': 1178899.1087500001, 'rate': 0.17889910875000004, 'base': -0.08318264014466537} 2021-02-14 23:02:02,978 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200324', 'cash': 328267.10875, 'stock': 856467.0, 'total': 1184734.1087500001, 'rate': 0.18473410875000007, 'base': -0.050632911392405} 2021-02-14 23:02:02,986 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200325', 'cash': 328267.10875, 'stock': 887790.0, 'total': 1216057.1087500001, 'rate': 0.21605710875000006, 'base': -0.04267631103074143} 2021-02-14 23:02:02,994 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200326', 'cash': 328267.10875, 'stock': 861993.0, 'total': 1190260.1087500001, 'rate': 0.1902601087500002, 'base': -0.032188065099457375} 2021-02-14 23:02:03,362 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：002696.SZ 2021-02-14 23:02:03,363 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '002696.SZ', 'cash': 65653.42175000001}交易成功,买入91手,花去65263.311750 2021-02-14 23:02:03,372 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200327', 'cash': 263003.797, 'stock': 911854.0, 'total': 1174857.797, 'rate': 0.17485779700000004, 'base': -0.07016274864376126} 2021-02-14 23:02:03,385 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200330', 'cash': 263003.797, 'stock': 922126.0, 'total': 1185129.797, 'rate': 0.1851297970000001, 'base': -0.0694394213381555} 2021-02-14 23:02:03,397 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200331', 'cash': 263003.797, 'stock': 894650.0, 'total': 1157653.797, 'rate': 0.15765379700000004, 'base': -0.07594936708860756} 2021-02-14 23:02:03,408 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200401', 'cash': 263003.797, 'stock': 874107.0, 'total': 1137110.797, 'rate': 0.13711079700000006, 'base': -0.0900542495479204} 2021-02-14 23:02:03,419 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200402', 'cash': 263003.797, 'stock': 896258.0, 'total': 1159261.797, 'rate': 0.1592617970000001, 'base': -0.054972875226039775} 2021-02-14 23:02:03,429 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200403', 'cash': 263003.797, 'stock': 914862.0, 'total': 1177865.797, 'rate': 0.17786579699999994, 'base': -0.06401446654611209} 2021-02-14 23:02:03,438 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200407', 'cash': 263003.797, 'stock': 954474.0, 'total': 1217477.797, 'rate': 0.21747779699999992, 'base': -0.03688969258589514} 2021-02-14 23:02:03,446 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200408', 'cash': 263003.797, 'stock': 941336.0, 'total': 1204339.797, 'rate': 0.20433979700000005, 'base': -0.019168173598553273} 2021-02-14 23:02:03,455 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200409', 'cash': 263003.797, 'stock': 954394.0, 'total': 1217397.797, 'rate': 0.21739779700000006, 'base': -0.017721518987341756} 2021-02-14 23:02:03,673 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：002979.SZ 2021-02-14 23:02:03,674 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '002979.SZ', 'cash': 52600.75940000001}交易成功,买入33手,花去51228.804000 2021-02-14 23:02:03,685 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200410', 'cash': 211774.99300000002, 'stock': 993668.0, 'total': 1205442.993, 'rate': 0.2054429929999999, 'base': -0.017721518987341756} 2021-02-14 23:02:03,700 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200413', 'cash': 211774.99300000002, 'stock': 983640.0, 'total': 1195414.993, 'rate': 0.19541499299999998, 'base': -0.03869801084990965} 2021-02-14 23:02:03,713 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200414', 'cash': 211774.99300000002, 'stock': 1013064.0, 'total': 1224838.993, 'rate': 0.2248389930000001, 'base': -0.016998191681735997} 2021-02-14 23:02:03,726 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200415', 'cash': 211774.99300000002, 'stock': 1000910.0, 'total': 1212684.993, 'rate': 0.2126849930000001, 'base': -0.03616636528028938} 2021-02-14 23:02:03,738 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200416', 'cash': 211774.99300000002, 'stock': 1005844.0, 'total': 1217618.993, 'rate': 0.2176189930000001, 'base': -0.02820976491862559} 2021-02-14 23:02:03,748 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200417', 'cash': 211774.99300000002, 'stock': 1003760.0, 'total': 1215534.993, 'rate': 0.21553499300000012, 'base': -0.025316455696202556} 2021-02-14 23:02:03,758 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200420', 'cash': 211774.99300000002, 'stock': 1004818.0, 'total': 1216592.993, 'rate': 0.21659299300000012, 'base': -0.009403254972875197} 2021-02-14 23:02:03,768 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200421', 'cash': 211774.99300000002, 'stock': 1004095.0, 'total': 1215869.993, 'rate': 0.2158699930000001, 'base': -0.025316455696202556} 2021-02-14 23:02:03,778 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200422', 'cash': 211774.99300000002, 'stock': 994614.0, 'total': 1206388.993, 'rate': 0.20638899300000002, 'base': -0.00687160940325493} 2021-02-14 23:02:04,027 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：002480.SZ 2021-02-14 23:02:04,028 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '002480.SZ', 'cash': 42354.998600000006}交易成功,买入60手,花去42010.500000 2021-02-14 23:02:04,038 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200423', 'cash': 169764.49300000002, 'stock': 1024529.0, 'total': 1194293.493, 'rate': 0.19429349299999998, 'base': -0.011211573236889594} 2021-02-14 23:02:04,053 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200424', 'cash': 169764.49300000002, 'stock': 980067.0, 'total': 1149831.493, 'rate': 0.14983149299999998, 'base': -0.018806509945750394} 2021-02-14 23:02:04,067 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200427', 'cash': 169764.49300000002, 'stock': 968603.0, 'total': 1138367.493, 'rate': 0.13836749300000006, 'base': -0.0224231464737793} 2021-02-14 23:02:04,080 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200428', 'cash': 169764.49300000002, 'stock': 933096.0, 'total': 1102860.493, 'rate': 0.10286049300000011, 'base': -0.031103074141048848} 2021-02-14 23:02:04,092 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200429', 'cash': 169764.49300000002, 'stock': 908486.0, 'total': 1078250.493, 'rate': 0.07825049300000009, 'base': -0.025316455696202556} 2021-02-14 23:02:04,103 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200430', 'cash': 169764.49300000002, 'stock': 916196.0, 'total': 1085960.493, 'rate': 0.08596049299999997, 'base': -0.032911392405063244} 2021-02-14 23:02:04,115 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200506', 'cash': 169764.49300000002, 'stock': 938124.0, 'total': 1107888.493, 'rate': 0.10788849299999992, 'base': -0.012296564195298343} 2021-02-14 23:02:04,127 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200507', 'cash': 169764.49300000002, 'stock': 945725.0, 'total': 1115489.493, 'rate': 0.11548949300000011, 'base': 0.0014466546112117395} 2021-02-14 23:02:04,138 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200508', 'cash': 169764.49300000002, 'stock': 946500.0, 'total': 1116264.493, 'rate': 0.11626449300000008, 'base': 0.019891500904159143} 2021-02-14 23:02:04,391 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：002983.SZ 2021-02-14 23:02:04,392 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '002983.SZ', 'cash': 33952.89860000001}交易成功,买入11手,花去33118.277500 2021-02-14 23:02:04,403 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200511', 'cash': 136646.21550000002, 'stock': 988702.0, 'total': 1125348.2155, 'rate': 0.12534821549999986, 'base': 0.00795660036166379} 2021-02-14 23:02:04,420 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200512', 'cash': 136646.21550000002, 'stock': 1017113.0, 'total': 1153759.2155, 'rate': 0.15375921549999982, 'base': 0.010488245931284057} 2021-02-14 23:02:04,435 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200513', 'cash': 136646.21550000002, 'stock': 1025016.0, 'total': 1161662.2155, 'rate': 0.16166221550000004, 'base': 0.013019891500904324} 2021-02-14 23:02:04,450 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200514', 'cash': 136646.21550000002, 'stock': 1026562.0, 'total': 1163208.2155, 'rate': 0.16320821549999986, 'base': 0.012658227848101333} 2021-02-14 23:02:04,462 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200515', 'cash': 136646.21550000002, 'stock': 1014670.0, 'total': 1151316.2155, 'rate': 0.15131621549999985, 'base': 0.00795660036166379} 2021-02-14 23:02:04,474 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200518', 'cash': 136646.21550000002, 'stock': 998238.0, 'total': 1134884.2155, 'rate': 0.13488421549999985, 'base': 0.018083182640144635} 2021-02-14 23:02:04,485 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200519', 'cash': 136646.21550000002, 'stock': 1015580.0, 'total': 1152226.2155, 'rate': 0.15222621550000004, 'base': 0.011934900542495575} 2021-02-14 23:02:04,497 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200520', 'cash': 136646.21550000002, 'stock': 998886.0, 'total': 1135532.2155, 'rate': 0.13553221549999983, 'base': 0.015551537070524368} 2021-02-14 23:02:04,509 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200521', 'cash': 136646.21550000002, 'stock': 979891.0, 'total': 1116537.2155, 'rate': 0.11653721549999996, 'base': -0.005424954792043302} 2021-02-14 23:02:04,728 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：002988.SZ 2021-02-14 23:02:04,729 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '002988.SZ', 'cash': 27329.243100000007}交易成功,买入13手,花去27267.815250 2021-02-14 23:02:04,740 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200522', 'cash': 109378.40025000002, 'stock': 991293.0, 'total': 1100671.40025, 'rate': 0.10067140024999999, 'base': -0.018806509945750394} 2021-02-14 23:02:04,758 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200525', 'cash': 109378.40025000002, 'stock': 986669.0, 'total': 1096047.40025, 'rate': 0.09604740025000003, 'base': -0.018806509945750394} 2021-02-14 23:02:04,774 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200526', 'cash': 109378.40025000002, 'stock': 1023491.0, 'total': 1132869.40025, 'rate': 0.13286940024999994, 'base': -0.010488245931283835} 2021-02-14 23:02:04,788 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200527', 'cash': 109378.40025000002, 'stock': 1012458.0, 'total': 1121836.40025, 'rate': 0.12183640024999987, 'base': -0.02133815551537066} 2021-02-14 23:02:04,801 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200528', 'cash': 109378.40025000002, 'stock': 990535.0, 'total': 1099913.40025, 'rate': 0.09991340024999995, 'base': -0.026039783001808314} 2021-02-14 23:02:04,813 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200529', 'cash': 109378.40025000002, 'stock': 987698.0, 'total': 1097076.40025, 'rate': 0.09707640024999997, 'base': -0.007594936708860689} 2021-02-14 23:02:04,826 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200601', 'cash': 109378.40025000002, 'stock': 1013619.0, 'total': 1122997.40025, 'rate': 0.12299740025000006, 'base': 0.020976491862567892} 2021-02-14 23:02:04,838 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200602', 'cash': 109378.40025000002, 'stock': 1023601.0, 'total': 1132979.40025, 'rate': 0.13297940025, 'base': 0.03001808318264021} 2021-02-14 23:02:04,851 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200603', 'cash': 109378.40025000002, 'stock': 1013437.0, 'total': 1122815.40025, 'rate': 0.12281540024999993, 'base': 0.03688969258589525} 2021-02-14 23:02:05,126 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：000679.SZ 2021-02-14 23:02:05,127 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '000679.SZ', 'cash': 21875.680050000006}交易成功,买入59手,花去21599.398500 2021-02-14 23:02:05,139 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200604', 'cash': 87779.00175000002, 'stock': 1029973.0, 'total': 1117752.00175, 'rate': 0.11775200175, 'base': 0.019891500904159143} 2021-02-14 23:02:05,158 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200605', 'cash': 87779.00175000002, 'stock': 1037192.0, 'total': 1124971.00175, 'rate': 0.12497100175000009, 'base': 0.03725135623869802} 2021-02-14 23:02:05,176 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200608', 'cash': 87779.00175000002, 'stock': 1031537.0, 'total': 1119316.00175, 'rate': 0.11931600175000012, 'base': 0.03544303797468351} 2021-02-14 23:02:05,191 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200609', 'cash': 87779.00175000002, 'stock': 1024931.0, 'total': 1112710.00175, 'rate': 0.11271000175000001, 'base': 0.03471971066907775} 2021-02-14 23:02:05,205 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200610', 'cash': 87779.00175000002, 'stock': 1019024.0, 'total': 1106803.00175, 'rate': 0.10680300175000013, 'base': 0.040144665461121276} 2021-02-14 23:02:05,218 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200611', 'cash': 87779.00175000002, 'stock': 1020553.0, 'total': 1108332.00175, 'rate': 0.10833200175000002, 'base': 0.024593128390596686} 2021-02-14 23:02:05,232 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200612', 'cash': 87779.00175000002, 'stock': 1031485.0, 'total': 1119264.00175, 'rate': 0.11926400174999996, 'base': 0.0358047016274865} 2021-02-14 23:02:05,245 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200615', 'cash': 87779.00175000002, 'stock': 1048759.0, 'total': 1136538.00175, 'rate': 0.13653800174999997, 'base': 0.04484629294755882} 2021-02-14 23:02:05,259 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200616', 'cash': 87779.00175000002, 'stock': 1059000.0, 'total': 1146779.00175, 'rate': 0.14677900175000014, 'base': 0.04484629294755882} 2021-02-14 23:02:05,269 - /Users/lizile/PycharmProjects/quant/main.py[line:236] - INFO: 选出池子：300683.SZ 2021-02-14 23:02:05,492 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：300837.SZ 2021-02-14 23:02:05,493 - /Users/lizile/PycharmProjects/quant/main.py[line:144] - INFO: {'code': '300683.SZ', 'cash': -99999999}交易成功,卖出26手,得到151947.900000 2021-02-14 23:02:05,494 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '300837.SZ', 'cash': 47975.800350000005}交易成功,买入9手,花去44372.090250 2021-02-14 23:02:05,507 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200617', 'cash': 195354.8115, 'stock': 962127.0, 'total': 1157481.8115, 'rate': 0.15748181150000007, 'base': 0.061482820976491936} 2021-02-14 23:02:05,527 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200618', 'cash': 195354.8115, 'stock': 943377.0, 'total': 1138731.8115, 'rate': 0.13873181150000002, 'base': 0.06329113924050622} 2021-02-14 23:02:05,545 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200619', 'cash': 195354.8115, 'stock': 929367.0, 'total': 1124721.8115, 'rate': 0.12472181150000017, 'base': 0.06365280289330921} 2021-02-14 23:02:05,559 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200622', 'cash': 195354.8115, 'stock': 937736.0, 'total': 1133090.8115, 'rate': 0.13309081150000002, 'base': 0.07848101265822782} 2021-02-14 23:02:05,574 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200623', 'cash': 195354.8115, 'stock': 936140.0, 'total': 1131494.8115, 'rate': 0.13149481150000009, 'base': 0.07956600361663657} 2021-02-14 23:02:05,588 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200624', 'cash': 195354.8115, 'stock': 935421.0, 'total': 1130775.8115, 'rate': 0.13077581150000017, 'base': 0.06582278481012649} 2021-02-14 23:02:05,603 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200629', 'cash': 195354.8115, 'stock': 938835.0, 'total': 1134189.8115, 'rate': 0.13418981149999998, 'base': 0.07124773960217001} 2021-02-14 23:02:05,619 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200630', 'cash': 195354.8115, 'stock': 950836.0, 'total': 1146190.8115, 'rate': 0.14619081150000013, 'base': 0.07124773960217001} 2021-02-14 23:02:05,635 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200701', 'cash': 195354.8115, 'stock': 958690.0, 'total': 1154044.8115, 'rate': 0.15404481150000016, 'base': 0.09113924050632916} 2021-02-14 23:02:05,646 - /Users/lizile/PycharmProjects/quant/main.py[line:236] - INFO: 选出池子：002983.SZ 2021-02-14 23:02:05,874 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：300839.SZ 2021-02-14 23:02:05,875 - /Users/lizile/PycharmProjects/quant/main.py[line:144] - INFO: {'code': '002983.SZ', 'cash': -99999999}交易成功,卖出11手,得到52955.991000 2021-02-14 23:02:05,876 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '300839.SZ', 'cash': 50273.36230000001}交易成功,买入19手,花去48937.231250 2021-02-14 23:02:05,890 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200702', 'cash': 199373.57125000004, 'stock': 956269.0, 'total': 1155642.57125, 'rate': 0.15564257125000003, 'base': 0.11898734177215209} 2021-02-14 23:02:05,911 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200703', 'cash': 199373.57125000004, 'stock': 969199.0, 'total': 1168572.57125, 'rate': 0.16857257125000014, 'base': 0.11898734177215209} 2021-02-14 23:02:05,930 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200706', 'cash': 199373.57125000004, 'stock': 1006057.0, 'total': 1205430.57125, 'rate': 0.20543057124999997, 'base': 0.22278481012658236} 2021-02-14 23:02:05,946 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200707', 'cash': 199373.57125000004, 'stock': 1025748.0, 'total': 1225121.57125, 'rate': 0.2251215712500001, 'base': 0.21157323688969254} 2021-02-14 23:02:05,961 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200708', 'cash': 199373.57125000004, 'stock': 1051257.0, 'total': 1250630.57125, 'rate': 0.2506305712500001, 'base': 0.25063291139240507} 2021-02-14 23:02:05,977 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200709', 'cash': 199373.57125000004, 'stock': 1099540.0, 'total': 1298913.57125, 'rate': 0.29891357124999995, 'base': 0.2694394213381557} 2021-02-14 23:02:05,992 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200710', 'cash': 199373.57125000004, 'stock': 1124513.0, 'total': 1323886.57125, 'rate': 0.3238865712500001, 'base': 0.26835443037974693} 2021-02-14 23:02:06,009 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200713', 'cash': 199373.57125000004, 'stock': 1168845.0, 'total': 1368218.57125, 'rate': 0.3682185712500001, 'base': 0.3052441229656422} 2021-02-14 23:02:06,024 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200714', 'cash': 199373.57125000004, 'stock': 1156317.0, 'total': 1355690.57125, 'rate': 0.35569057125000003, 'base': 0.2936708860759496} 2021-02-14 23:02:06,036 - /Users/lizile/PycharmProjects/quant/main.py[line:236] - INFO: 选出池子：002979.SZ 2021-02-14 23:02:06,377 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：002164.SZ 2021-02-14 23:02:06,378 - /Users/lizile/PycharmProjects/quant/main.py[line:144] - INFO: {'code': '002979.SZ', 'cash': -99999999}交易成功,卖出33手,得到130219.650000 2021-02-14 23:02:06,379 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '002164.SZ', 'cash': 66254.91425000002}交易成功,买入130手,花去65796.445000 2021-02-14 23:02:06,393 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200715', 'cash': 263796.77625000005, 'stock': 1052257.0, 'total': 1316053.77625, 'rate': 0.3160537762500002, 'base': 0.26835443037974693} 2021-02-14 23:02:06,416 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200716', 'cash': 263796.77625000005, 'stock': 983811.0, 'total': 1247607.77625, 'rate': 0.2476077762500002, 'base': 0.20759493670886076} 2021-02-14 23:02:06,437 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200717', 'cash': 263796.77625000005, 'stock': 964615.0, 'total': 1228411.77625, 'rate': 0.2284117762500002, 'base': 0.21012658227848102} 2021-02-14 23:02:06,456 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200720', 'cash': 263796.77625000005, 'stock': 995430.0, 'total': 1259226.77625, 'rate': 0.25922677625, 'base': 0.24520795660036176} 2021-02-14 23:02:06,472 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200721', 'cash': 263796.77625000005, 'stock': 990159.0, 'total': 1253955.77625, 'rate': 0.2539557762500002, 'base': 0.24737793851717926} 2021-02-14 23:02:06,489 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200722', 'cash': 263796.77625000005, 'stock': 994996.0, 'total': 1258792.77625, 'rate': 0.2587927762500002, 'base': 0.24665461121157328} 2021-02-14 23:02:06,505 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200723', 'cash': 263796.77625000005, 'stock': 985122.0, 'total': 1248918.77625, 'rate': 0.24891877625000003, 'base': 0.23978300180831846} 2021-02-14 23:02:06,522 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200724', 'cash': 263796.77625000005, 'stock': 949988.0, 'total': 1213784.77625, 'rate': 0.21378477625000003, 'base': 0.19602169981916817} 2021-02-14 23:02:06,538 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200727', 'cash': 263796.77625000005, 'stock': 956199.0, 'total': 1219995.77625, 'rate': 0.21999577625000022, 'base': 0.19783001808318268} 2021-02-14 23:02:06,550 - /Users/lizile/PycharmProjects/quant/main.py[line:236] - INFO: 选出池子：300837.SZ 2021-02-14 23:02:07,201 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：002691.SZ 2021-02-14 23:02:07,202 - /Users/lizile/PycharmProjects/quant/main.py[line:144] - INFO: {'code': '300837.SZ', 'cash': -99999999}交易成功,卖出9手,得到59340.600000 2021-02-14 23:02:07,202 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '002691.SZ', 'cash': 65071.355250000015}交易成功,买入101手,花去65060.261000 2021-02-14 23:02:07,218 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200728', 'cash': 258077.11525000003, 'stock': 992647.0, 'total': 1250724.11525, 'rate': 0.25072411524999993, 'base': 0.1996383363471972} 2021-02-14 23:02:07,241 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200729', 'cash': 258077.11525000003, 'stock': 1001627.0, 'total': 1259704.11525, 'rate': 0.2597041152499999, 'base': 0.24376130198915025} 2021-02-14 23:02:07,262 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200730', 'cash': 258077.11525000003, 'stock': 997149.0, 'total': 1255226.11525, 'rate': 0.25522611524999994, 'base': 0.23218806509945766} 2021-02-14 23:02:07,279 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200731', 'cash': 258077.11525000003, 'stock': 1006202.0, 'total': 1264279.11525, 'rate': 0.26427911525000014, 'base': 0.24376130198915025} 2021-02-14 23:02:07,296 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200803', 'cash': 258077.11525000003, 'stock': 1021412.0, 'total': 1279489.11525, 'rate': 0.2794891152500001, 'base': 0.2907775768535261} 2021-02-14 23:02:07,314 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200804', 'cash': 258077.11525000003, 'stock': 1001436.0, 'total': 1259513.11525, 'rate': 0.2595131152500001, 'base': 0.27920433996383354} 2021-02-14 23:02:07,331 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200805', 'cash': 258077.11525000003, 'stock': 1008754.0, 'total': 1266831.11525, 'rate': 0.26683111525000003, 'base': 0.29728752260397817} 2021-02-14 23:02:07,349 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200806', 'cash': 258077.11525000003, 'stock': 1025932.0, 'total': 1284009.11525, 'rate': 0.28400911524999994, 'base': 0.30018083182640165} 2021-02-14 23:02:07,366 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200807', 'cash': 258077.11525000003, 'stock': 1008248.0, 'total': 1266325.11525, 'rate': 0.26632511525000013, 'base': 0.2745027124773962} 2021-02-14 23:02:07,379 - /Users/lizile/PycharmProjects/quant/main.py[line:236] - INFO: 选出池子：002971.SZ 2021-02-14 23:02:07,622 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：002991.SZ 2021-02-14 23:02:07,624 - /Users/lizile/PycharmProjects/quant/main.py[line:144] - INFO: {'code': '002971.SZ', 'cash': -99999999}交易成功,卖出106手,得到284854.860000 2021-02-14 23:02:07,625 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '002991.SZ', 'cash': 108643.42305000001}交易成功,买入12手,花去107882.964000 2021-02-14 23:02:07,641 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200810', 'cash': 435049.01125, 'stock': 852121.0, 'total': 1287170.01125, 'rate': 0.28717001124999997, 'base': 0.2875226039783003} 2021-02-14 23:02:07,670 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200811', 'cash': 435049.01125, 'stock': 846073.0, 'total': 1281122.01125, 'rate': 0.2811220112499999, 'base': 0.25822784810126587} 2021-02-14 23:02:07,693 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200812', 'cash': 435049.01125, 'stock': 860608.0, 'total': 1295657.01125, 'rate': 0.2956570112499999, 'base': 0.2538878842676313} 2021-02-14 23:02:07,713 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200813', 'cash': 435049.01125, 'stock': 876803.0, 'total': 1311852.01125, 'rate': 0.31185201125000006, 'base': 0.2535262206148281} 2021-02-14 23:02:07,731 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200814', 'cash': 435049.01125, 'stock': 895674.0, 'total': 1330723.01125, 'rate': 0.3307230112499999, 'base': 0.2632911392405064} 2021-02-14 23:02:07,750 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200817', 'cash': 435049.01125, 'stock': 905787.0, 'total': 1340836.01125, 'rate': 0.34083601124999996, 'base': 0.29620253164556987} 2021-02-14 23:02:07,768 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200818', 'cash': 435049.01125, 'stock': 911324.0, 'total': 1346373.01125, 'rate': 0.3463730112500001, 'base': 0.29656419529837263} 2021-02-14 23:02:07,787 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200819', 'cash': 435049.01125, 'stock': 886715.0, 'total': 1321764.01125, 'rate': 0.32176401125, 'base': 0.27341772151898747} 2021-02-14 23:02:07,805 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200820', 'cash': 435049.01125, 'stock': 879119.0, 'total': 1314168.01125, 'rate': 0.31416801125000005, 'base': 0.27341772151898747} 2021-02-14 23:02:07,818 - /Users/lizile/PycharmProjects/quant/main.py[line:236] - INFO: 选出池子：002991.SZ 2021-02-14 23:02:08,058 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：002993.SZ 2021-02-14 23:02:08,059 - /Users/lizile/PycharmProjects/quant/main.py[line:144] - INFO: {'code': '002991.SZ', 'cash': -99999999}交易成功,卖出12手,得到169042.788000 2021-02-14 23:02:08,059 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '002993.SZ', 'cash': 120053.00225}交易成功,买入23手,花去118525.624000 2021-02-14 23:02:08,076 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200821', 'cash': 485566.1752499999, 'stock': 850880.0, 'total': 1336446.1752499999, 'rate': 0.33644617524999987, 'base': 0.27124773960216997} 2021-02-14 23:02:08,102 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200824', 'cash': 485566.1752499999, 'stock': 869144.0, 'total': 1354710.1752499999, 'rate': 0.3547101752499999, 'base': 0.2817359855334538} 2021-02-14 23:02:08,125 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200825', 'cash': 485566.1752499999, 'stock': 883172.0, 'total': 1368738.1752499999, 'rate': 0.36873817524999986, 'base': 0.27811934900542523} 2021-02-14 23:02:08,147 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200826', 'cash': 485566.1752499999, 'stock': 867175.0, 'total': 1352741.1752499999, 'rate': 0.3527411752499998, 'base': 0.25099457504520806} 2021-02-14 23:02:08,167 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200827', 'cash': 485566.1752499999, 'stock': 882602.0, 'total': 1368168.1752499999, 'rate': 0.3681681752499999, 'base': 0.25099457504520806} 2021-02-14 23:02:08,186 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200828', 'cash': 485566.1752499999, 'stock': 888823.0, 'total': 1374389.1752499999, 'rate': 0.37438917524999993, 'base': 0.2915009041591321} 2021-02-14 23:02:08,205 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200831', 'cash': 485566.1752499999, 'stock': 910120.0, 'total': 1395686.1752499999, 'rate': 0.3956861752499998, 'base': 0.2817359855334538} 2021-02-14 23:02:08,224 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200901', 'cash': 485566.1752499999, 'stock': 900680.0, 'total': 1386246.1752499999, 'rate': 0.38624617524999993, 'base': 0.29945750452079567} 2021-02-14 23:02:08,244 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200902', 'cash': 485566.1752499999, 'stock': 917238.0, 'total': 1402804.1752499999, 'rate': 0.4028041752499998, 'base': 0.2976491862567814} 2021-02-14 23:02:08,257 - /Users/lizile/PycharmProjects/quant/main.py[line:236] - INFO: 选出池子：002993.SZ 2021-02-14 23:02:08,521 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：600301.SH 2021-02-14 23:02:08,522 - /Users/lizile/PycharmProjects/quant/main.py[line:144] - INFO: {'code': '002993.SZ', 'cash': -99999999}交易成功,卖出23手,得到209067.723000 2021-02-14 23:02:08,523 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '600301.SH', 'cash': 140344.03504999998}交易成功,买入200手,花去140235.050000 2021-02-14 23:02:08,540 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200903', 'cash': 554398.8482499998, 'stock': 832705.0, 'total': 1387103.8482499998, 'rate': 0.38710384824999977, 'base': 0.2730560578661847} 2021-02-14 23:02:08,567 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200904', 'cash': 554398.8482499998, 'stock': 835021.0, 'total': 1389419.8482499998, 'rate': 0.38941984824999976, 'base': 0.28137432188065103} 2021-02-14 23:02:08,589 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200907', 'cash': 554398.8482499998, 'stock': 824243.0, 'total': 1378641.8482499998, 'rate': 0.3786418482499998, 'base': 0.28137432188065103} 2021-02-14 23:02:08,610 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200908', 'cash': 554398.8482499998, 'stock': 828122.0, 'total': 1382520.8482499998, 'rate': 0.38252084824999977, 'base': 0.2502712477396023} 2021-02-14 23:02:08,631 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200909', 'cash': 554398.8482499998, 'stock': 839872.0, 'total': 1394270.8482499998, 'rate': 0.3942708482499999, 'base': 0.23616636528028945} 2021-02-14 23:02:08,653 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200910', 'cash': 554398.8482499998, 'stock': 787513.0, 'total': 1341911.8482499998, 'rate': 0.3419118482499999, 'base': 0.1938517179023509} 2021-02-14 23:02:08,673 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200911', 'cash': 554398.8482499998, 'stock': 802536.0, 'total': 1356934.8482499998, 'rate': 0.3569348482499999, 'base': 0.21084990958408678} 2021-02-14 23:02:08,693 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200914', 'cash': 554398.8482499998, 'stock': 816560.0, 'total': 1370958.8482499998, 'rate': 0.3709588482499997, 'base': 0.2220614828209766} 2021-02-14 23:02:08,713 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200915', 'cash': 554398.8482499998, 'stock': 813319.0, 'total': 1367717.8482499998, 'rate': 0.36771784824999987, 'base': 0.2426763110307415} 2021-02-14 23:02:08,727 - /Users/lizile/PycharmProjects/quant/main.py[line:236] - INFO: 选出池子：300839.SZ 2021-02-14 23:02:08,958 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：000572.SZ 2021-02-14 23:02:08,960 - /Users/lizile/PycharmProjects/quant/main.py[line:144] - INFO: {'code': '300839.SZ', 'cash': -99999999}交易成功,卖出19手,得到56829.114000 2021-02-14 23:02:08,961 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '000572.SZ', 'cash': 122424.16964999997}交易成功,买入453手,花去122340.577500 2021-02-14 23:02:08,979 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200916', 'cash': 488887.38474999985, 'stock': 872015.0, 'total': 1360902.3847499997, 'rate': 0.3609023847499997, 'base': 0.23797468354430373} 2021-02-14 23:02:09,007 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200917', 'cash': 488887.38474999985, 'stock': 880512.0, 'total': 1369399.3847499997, 'rate': 0.36939938474999967, 'base': 0.24412296564195302} 2021-02-14 23:02:09,030 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200918', 'cash': 488887.38474999985, 'stock': 878812.0, 'total': 1367699.3847499997, 'rate': 0.36769938474999964, 'base': 0.2578661844484631} 2021-02-14 23:02:09,051 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200921', 'cash': 488887.38474999985, 'stock': 871440.0, 'total': 1360327.3847499997, 'rate': 0.3603273847499997, 'base': 0.2575045207956601} 2021-02-14 23:02:09,072 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200922', 'cash': 488887.38474999985, 'stock': 865825.0, 'total': 1354712.3847499997, 'rate': 0.3547123847499998, 'base': 0.23869801084990971} 2021-02-14 23:02:09,093 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200923', 'cash': 488887.38474999985, 'stock': 863628.0, 'total': 1352515.3847499997, 'rate': 0.35251538474999977, 'base': 0.2220614828209766} 2021-02-14 23:02:09,115 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200924', 'cash': 488887.38474999985, 'stock': 841489.0, 'total': 1330376.3847499997, 'rate': 0.33037638474999964, 'base': 0.2086799276672695} 2021-02-14 23:02:09,137 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200925', 'cash': 488887.38474999985, 'stock': 848160.0, 'total': 1337047.3847499997, 'rate': 0.33704738474999973, 'base': 0.20470162748643772} 2021-02-14 23:02:09,159 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200928', 'cash': 488887.38474999985, 'stock': 847512.0, 'total': 1336399.3847499997, 'rate': 0.33639938474999975, 'base': 0.1996383363471972} 2021-02-14 23:02:09,174 - /Users/lizile/PycharmProjects/quant/main.py[line:236] - INFO: 选出池子：300821.SZ 2021-02-14 23:02:09,427 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：002998.SZ 2021-02-14 23:02:09,428 - /Users/lizile/PycharmProjects/quant/main.py[line:144] - INFO: {'code': '300821.SZ', 'cash': -99999999}交易成功,卖出75手,得到89010.900000 2021-02-14 23:02:09,429 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '002998.SZ', 'cash': 114757.47694999998}交易成功,买入123手,花去113926.474500 2021-02-14 23:02:09,449 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200929', 'cash': 463971.81024999986, 'stock': 891379.0, 'total': 1355350.8102499999, 'rate': 0.3553508102499998, 'base': 0.21121157323688977} 2021-02-14 23:02:09,479 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20200930', 'cash': 463971.81024999986, 'stock': 887379.0, 'total': 1351350.8102499999, 'rate': 0.3513508102499998, 'base': 0.21121157323688977} 2021-02-14 23:02:09,504 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201009', 'cash': 463971.81024999986, 'stock': 911641.0, 'total': 1375612.8102499999, 'rate': 0.3756128102499998, 'base': 0.2611211573236889} 2021-02-14 23:02:09,526 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201012', 'cash': 463971.81024999986, 'stock': 936114.0, 'total': 1400085.8102499999, 'rate': 0.4000858102499998, 'base': 0.2802893309222423} 2021-02-14 23:02:09,548 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201013', 'cash': 463971.81024999986, 'stock': 925560.0, 'total': 1389531.8102499999, 'rate': 0.38953181024999983, 'base': 0.28065099457504505} 2021-02-14 23:02:09,570 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201014', 'cash': 463971.81024999986, 'stock': 914568.0, 'total': 1378539.8102499999, 'rate': 0.37853981024999994, 'base': 0.2770343580470165} 2021-02-14 23:02:09,592 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201015', 'cash': 463971.81024999986, 'stock': 901995.0, 'total': 1365966.8102499999, 'rate': 0.3659668102499998, 'base': 0.2600361663652804} 2021-02-14 23:02:09,617 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201016', 'cash': 463971.81024999986, 'stock': 909089.0, 'total': 1373060.8102499999, 'rate': 0.37306081024999993, 'base': 0.26365280289330917} 2021-02-14 23:02:09,640 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201019', 'cash': 463971.81024999986, 'stock': 901771.0, 'total': 1365742.8102499999, 'rate': 0.3657428102499998, 'base': 0.24556962025316453} 2021-02-14 23:02:09,657 - /Users/lizile/PycharmProjects/quant/main.py[line:236] - INFO: 选出池子：002998.SZ 2021-02-14 23:02:09,872 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：003009.SZ 2021-02-14 23:02:09,873 - /Users/lizile/PycharmProjects/quant/main.py[line:144] - INFO: {'code': '002998.SZ', 'cash': -99999999}交易成功,卖出123手,得到130249.620000 2021-02-14 23:02:09,874 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '003009.SZ', 'cash': 118771.96204999997}交易成功,买入24手,花去115972.986000 2021-02-14 23:02:09,893 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201020', 'cash': 478248.4442499998, 'stock': 900503.0, 'total': 1378751.4442499997, 'rate': 0.37875144424999974, 'base': 0.2690777576853529} 2021-02-14 23:02:09,922 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201021', 'cash': 478248.4442499998, 'stock': 905725.0, 'total': 1383973.4442499997, 'rate': 0.3839734442499998, 'base': 0.2575045207956601} 2021-02-14 23:02:09,945 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201022', 'cash': 478248.4442499998, 'stock': 916398.0, 'total': 1394646.4442499997, 'rate': 0.39464644424999973, 'base': 0.2524412296564198} 2021-02-14 23:02:09,969 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201023', 'cash': 478248.4442499998, 'stock': 928902.0, 'total': 1407150.4442499997, 'rate': 0.4071504442499998, 'base': 0.2350813743218807} 2021-02-14 23:02:09,992 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201026', 'cash': 478248.4442499998, 'stock': 957245.0, 'total': 1435493.4442499997, 'rate': 0.4354934442499998, 'base': 0.21916817359855334} 2021-02-14 23:02:10,015 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201027', 'cash': 478248.4442499998, 'stock': 974174.0, 'total': 1452422.4442499997, 'rate': 0.4524224442499998, 'base': 0.22423146473779387} 2021-02-14 23:02:10,038 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201028', 'cash': 478248.4442499998, 'stock': 954374.0, 'total': 1432622.4442499997, 'rate': 0.43262244424999974, 'base': 0.21338155515370705} 2021-02-14 23:02:10,062 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201029', 'cash': 478248.4442499998, 'stock': 937018.0, 'total': 1415266.4442499997, 'rate': 0.4152664442499998, 'base': 0.2274864376130199} 2021-02-14 23:02:10,086 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201030', 'cash': 478248.4442499998, 'stock': 919584.0, 'total': 1397832.4442499997, 'rate': 0.39783244424999964, 'base': 0.2086799276672695} 2021-02-14 23:02:10,104 - /Users/lizile/PycharmProjects/quant/main.py[line:236] - INFO: 选出池子：003009.SZ 2021-02-14 23:02:10,325 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：605169.SH 2021-02-14 23:02:10,326 - /Users/lizile/PycharmProjects/quant/main.py[line:144] - INFO: {'code': '003009.SZ', 'cash': -99999999}交易成功,卖出24手,得到151048.800000 2021-02-14 23:02:10,327 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '605169.SH', 'cash': 129028.88884999997}交易成功,买入48手,花去127999.992000 2021-02-14 23:02:10,347 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201102', 'cash': 501297.2522499998, 'stock': 876970.0, 'total': 1378267.25225, 'rate': 0.3782672522499999, 'base': 0.22097649186256785} 2021-02-14 23:02:10,377 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201103', 'cash': 501297.2522499998, 'stock': 877873.0, 'total': 1379170.25225, 'rate': 0.37917025225, 'base': 0.22097649186256785} 2021-02-14 23:02:10,402 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201104', 'cash': 501297.2522499998, 'stock': 874474.0, 'total': 1375771.25225, 'rate': 0.37577125224999985, 'base': 0.2640144665461124} 2021-02-14 23:02:10,427 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201105', 'cash': 501297.2522499998, 'stock': 888956.0, 'total': 1390253.25225, 'rate': 0.39025325224999996, 'base': 0.2875226039783003} 2021-02-14 23:02:10,451 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201106', 'cash': 501297.2522499998, 'stock': 881147.0, 'total': 1382444.25225, 'rate': 0.38244425225, 'base': 0.26365280289330917} 2021-02-14 23:02:10,476 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201109', 'cash': 501297.2522499998, 'stock': 894401.0, 'total': 1395698.25225, 'rate': 0.3956982522499999, 'base': 0.26365280289330917} 2021-02-14 23:02:10,500 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201110', 'cash': 501297.2522499998, 'stock': 888504.0, 'total': 1389801.25225, 'rate': 0.38980125224999984, 'base': 0.27197106690777595} 2021-02-14 23:02:10,524 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201111', 'cash': 501297.2522499998, 'stock': 894014.0, 'total': 1395311.25225, 'rate': 0.39531125224999997, 'base': 0.25461121157323685} 2021-02-14 23:02:10,553 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201112', 'cash': 501297.2522499998, 'stock': 888985.0, 'total': 1390282.25225, 'rate': 0.3902822522499998, 'base': 0.2517179023508138} 2021-02-14 23:02:10,575 - /Users/lizile/PycharmProjects/quant/main.py[line:236] - INFO: 选出池子：002164.SZ 2021-02-14 23:02:10,815 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：003018.SZ 2021-02-14 23:02:10,816 - /Users/lizile/PycharmProjects/quant/main.py[line:144] - INFO: {'code': '002164.SZ', 'cash': -99999999}交易成功,卖出130手,得到78181.740000 2021-02-14 23:02:10,817 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '003018.SZ', 'cash': 115547.45044999996}交易成功,买入61手,花去114952.731000 2021-02-14 23:02:10,838 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201113', 'cash': 464526.26124999975, 'stock': 912943.0, 'total': 1377469.2612499997, 'rate': 0.3774692612499997, 'base': 0.25822784810126587} 2021-02-14 23:02:10,870 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201116', 'cash': 464526.26124999975, 'stock': 919305.0, 'total': 1383831.2612499997, 'rate': 0.38383126124999967, 'base': 0.2831826401446653} 2021-02-14 23:02:10,896 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201117', 'cash': 464526.26124999975, 'stock': 907545.0, 'total': 1372071.2612499997, 'rate': 0.3720712612499997, 'base': 0.278481012658228} 2021-02-14 23:02:10,922 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201118', 'cash': 464526.26124999975, 'stock': 911330.0, 'total': 1375856.2612499997, 'rate': 0.3758562612499998, 'base': 0.27558770343580496} 2021-02-14 23:02:10,947 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201119', 'cash': 464526.26124999975, 'stock': 909227.0, 'total': 1373753.2612499997, 'rate': 0.37375326124999986, 'base': 0.27197106690777595} 2021-02-14 23:02:10,972 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201120', 'cash': 464526.26124999975, 'stock': 918933.0, 'total': 1383459.2612499997, 'rate': 0.38345926124999985, 'base': 0.29258589511754085} 2021-02-14 23:02:10,997 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201123', 'cash': 464526.26124999975, 'stock': 914664.0, 'total': 1379190.2612499997, 'rate': 0.37919026124999977, 'base': 0.29258589511754085} 2021-02-14 23:02:11,023 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201124', 'cash': 464526.26124999975, 'stock': 925103.0, 'total': 1389629.2612499997, 'rate': 0.38962926124999986, 'base': 0.29041591320072335} 2021-02-14 23:02:11,051 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201125', 'cash': 464526.26124999975, 'stock': 915730.0, 'total': 1380256.2612499997, 'rate': 0.3802562612499998, 'base': 0.2745027124773962} 2021-02-14 23:02:11,074 - /Users/lizile/PycharmProjects/quant/main.py[line:236] - INFO: 选出池子：000572.SZ 2021-02-14 23:02:11,302 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：605177.SH 2021-02-14 23:02:11,303 - /Users/lizile/PycharmProjects/quant/main.py[line:144] - INFO: {'code': '000572.SZ', 'cash': -99999999}交易成功,卖出453手,得到136216.647000 2021-02-14 23:02:11,304 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '605177.SH', 'cash': 120810.05224999995}交易成功,买入32手,花去119581.888000 2021-02-14 23:02:11,325 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201126', 'cash': 481161.0202499997, 'stock': 928189.0, 'total': 1409350.0202499996, 'rate': 0.40935002024999956, 'base': 0.2745027124773962} 2021-02-14 23:02:11,359 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201127', 'cash': 481161.0202499997, 'stock': 944446.0, 'total': 1425607.0202499996, 'rate': 0.4256070202499995, 'base': 0.27811934900542523} 2021-02-14 23:02:11,385 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201130', 'cash': 481161.0202499997, 'stock': 931924.0, 'total': 1413085.0202499996, 'rate': 0.4130850202499996, 'base': 0.2611211573236889} 2021-02-14 23:02:11,411 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201201', 'cash': 481161.0202499997, 'stock': 930714.0, 'total': 1411875.0202499996, 'rate': 0.41187502024999967, 'base': 0.2611211573236889} 2021-02-14 23:02:11,436 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201202', 'cash': 481161.0202499997, 'stock': 939418.0, 'total': 1420579.0202499996, 'rate': 0.4205790202499995, 'base': 0.3027124773960219} 2021-02-14 23:02:11,462 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201203', 'cash': 481161.0202499997, 'stock': 950548.0, 'total': 1431709.0202499996, 'rate': 0.4317090202499996, 'base': 0.29620253164556987} 2021-02-14 23:02:11,488 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201204', 'cash': 481161.0202499997, 'stock': 939098.0, 'total': 1420259.0202499996, 'rate': 0.4202590202499996, 'base': 0.30379746835443044} 2021-02-14 23:02:11,514 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201207', 'cash': 481161.0202499997, 'stock': 933277.0, 'total': 1414438.0202499996, 'rate': 0.41443802024999954, 'base': 0.2976491862567814} 2021-02-14 23:02:11,542 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201208', 'cash': 481161.0202499997, 'stock': 926417.0, 'total': 1407578.0202499996, 'rate': 0.4075780202499997, 'base': 0.3005424954792044} 2021-02-14 23:02:11,563 - /Users/lizile/PycharmProjects/quant/main.py[line:236] - INFO: 选出池子：605177.SH 2021-02-14 23:02:11,781 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：003022.SZ 2021-02-14 23:02:11,782 - /Users/lizile/PycharmProjects/quant/main.py[line:144] - INFO: {'code': '605177.SH', 'cash': -99999999}交易成功,卖出32手,得到146317.536000 2021-02-14 23:02:11,783 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '003022.SZ', 'cash': 125275.40404999995}交易成功,买入91手,花去125156.281250 2021-02-14 23:02:11,805 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201209', 'cash': 502322.2749999997, 'stock': 940225.0, 'total': 1442547.2749999997, 'rate': 0.4425472749999997, 'base': 0.26075949367088613} 2021-02-14 23:02:11,839 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201210', 'cash': 502322.2749999997, 'stock': 947819.0, 'total': 1450141.2749999997, 'rate': 0.45014127499999956, 'base': 0.27558770343580496} 2021-02-14 23:02:11,866 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201211', 'cash': 502322.2749999997, 'stock': 928546.0, 'total': 1430868.2749999997, 'rate': 0.4308682749999997, 'base': 0.24412296564195302} 2021-02-14 23:02:11,893 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201214', 'cash': 502322.2749999997, 'stock': 916912.0, 'total': 1419234.2749999997, 'rate': 0.41923427499999977, 'base': 0.2600361663652804} 2021-02-14 23:02:11,920 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201215', 'cash': 502322.2749999997, 'stock': 915727.0, 'total': 1418049.2749999997, 'rate': 0.4180492749999998, 'base': 0.2669077757685354} 2021-02-14 23:02:11,947 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201216', 'cash': 502322.2749999997, 'stock': 888523.0, 'total': 1390845.2749999997, 'rate': 0.39084527499999977, 'base': 0.26039783001808336} 2021-02-14 23:02:11,974 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201217', 'cash': 502322.2749999997, 'stock': 893677.0, 'total': 1395999.2749999997, 'rate': 0.39599927499999965, 'base': 0.2730560578661847} 2021-02-14 23:02:12,002 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201218', 'cash': 502322.2749999997, 'stock': 893046.0, 'total': 1395368.2749999997, 'rate': 0.3953682749999996, 'base': 0.2600361663652804} 2021-02-14 23:02:12,033 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201221', 'cash': 502322.2749999997, 'stock': 897547.0, 'total': 1399869.2749999997, 'rate': 0.3998692749999997, 'base': 0.27377938517179023} 2021-02-14 23:02:12,055 - /Users/lizile/PycharmProjects/quant/main.py[line:236] - INFO: 选出池子：000953.SZ 2021-02-14 23:02:12,257 - /Users/lizile/PycharmProjects/quant/main.py[line:248] - INFO: 选入池子：003026.SZ 2021-02-14 23:02:12,258 - /Users/lizile/PycharmProjects/quant/main.py[line:144] - INFO: {'code': '000953.SZ', 'cash': -99999999}交易成功,卖出262手,得到121969.908000 2021-02-14 23:02:12,259 - /Users/lizile/PycharmProjects/quant/main.py[line:137] - INFO: {'code': '003026.SZ', 'cash': 124935.25499999995}交易成功,买入56手,花去123230.800000 2021-02-14 23:02:12,282 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201222', 'cash': 501061.38299999974, 'stock': 901200.0, 'total': 1402261.3829999997, 'rate': 0.4022613829999997, 'base': 0.2484629294755878} 2021-02-14 23:02:12,316 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201223', 'cash': 501061.38299999974, 'stock': 922684.0, 'total': 1423745.3829999997, 'rate': 0.42374538299999975, 'base': 0.26075949367088613} 2021-02-14 23:02:12,344 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201224', 'cash': 501061.38299999974, 'stock': 936162.0, 'total': 1437223.3829999997, 'rate': 0.43722338299999963, 'base': 0.24448462929475578} 2021-02-14 23:02:12,372 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201225', 'cash': 501061.38299999974, 'stock': 954495.0, 'total': 1455556.3829999997, 'rate': 0.4555563829999998, 'base': 0.24448462929475578} 2021-02-14 23:02:12,400 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201228', 'cash': 501061.38299999974, 'stock': 974311.0, 'total': 1475372.3829999997, 'rate': 0.4753723829999996, 'base': 0.2484629294755878} 2021-02-14 23:02:12,428 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201229', 'cash': 501061.38299999974, 'stock': 986436.0, 'total': 1487497.3829999997, 'rate': 0.4874973829999998, 'base': 0.24520795660036176} 2021-02-14 23:02:12,456 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201230', 'cash': 501061.38299999974, 'stock': 1003511.0, 'total': 1504572.3829999997, 'rate': 0.5045723829999997, 'base': 0.26039783001808336} 2021-02-14 23:02:12,487 - /Users/lizile/PycharmProjects/quant/main.py[line:170] - INFO: {'date': '20201231', 'cash': 501061.38299999974, 'stock': 1020465.0, 'total': 1521526.3829999997, 'rate': 0.5215263829999996, 'base': 0.27667269439421327} 2021-02-14 23:07:17.854 Python[10380:314416] WARNING: &lt;NSSavePanel: 0x7f948d9a1710&gt; found it necessary to prepare implicitly; please prepare panels using NSSavePanel rather than NSApplication or NSWindow. 2021-02-14 23:07:18.855 Python[10380:314416] WARNING: &lt;NSSavePanel: 0x7f948d9a1710&gt; found it necessary to start implicitly; please start panels using NSSavePanel rather than NSApplication or NSWindow. 2021-02-14 23:07:18.855 Python[10380:314416] WARNING: &lt;NSSavePanel: 0x7f948d9a1710&gt; running implicitly; please run panels using NSSavePanel rather than NSApplication. 相关文章 本地回测框架搭建 ","link":"https://InsZVA.github.io/post/jian-dan-ce-lue-shi-xian-2020-nian-chao-yue-hu-shen-500-zhi-shu/"},{"title":"打造本地量化回测框架","content":"仓位系统 一个简单的字典作为持仓列表，key为标的代码，value为持有股数 class Portfolio: def __init__(self): self.position = collections.defaultdict(int) def update_position(self, code='000001.SZ', hand=100): self.position[code] += hand def get_position(self, code='000001.SZ'): return self.position[code] 仓位信息 单纯仓位系统不能直接开放给策略，策略应该拿到的是一个实际持仓的只读副本。 class PortfolioInfo: def __init__(self, portfolio: Portfolio, start_date: str, end_date: str, date: str, avail_cash: float): self.position = {} for k, v in portfolio.position.items(): self.position[k] = {'hand': v, 'value': Util.get_price(k).close(date) * v * 100} self.avail_cash = avail_cash self.order = [] self.date = date self.start_date = start_date self.end_date = end_date def total_value(self) -&gt; float: res = 0 for k, v in self.position.items(): res += v['value'] return res def rate(self) -&gt; float: return self.total_value() / (self.avail_cash + self.total_value()) def order_by_hand(self, code='000001.SZ', hand=100.): self.order.append({&quot;code&quot;: code, &quot;hand&quot;: hand}) def order_by_cash(self, code='000001.SZ', cash=10000.): self.order.append({&quot;code&quot;: code, &quot;cash&quot;: cash}) 此外，这个信息结构里面还要带上订单系统，供策略调用，策略调用结束后，此结构记录了策略下单的信息，带回模拟器进行模拟购买。 模拟器 模拟器里面主要负责维护一份持仓列表，并提供给策略去做买入卖出操作，操作结束后对策略的下单信息分别进行处理。对于股数/现金买入，计算佣金情况下，二分查找能够在范围内买到的最大数量，对于卖出，计算在佣金印花税消耗下，二分查找最大能卖出的数量处理，处理数量为整百股。另外模拟器在每个交易日的模拟结束后收集仓位信息，最终输出评估表。 class Simulator: def __init__(self, strategy, init_cash=100000., start_date='20200101', end_date='20210101', duty=0.001, brokerage=0.00025): self.init_cash = init_cash self.cash = init_cash self.start_date = start_date self.end_date = end_date self.duty = duty self.brokerage = brokerage self.strategy = strategy self.portfolio = Portfolio() df: pd.DataFrame = pro.trade_cal(start_date=start_date, end_date=end_date) df = df.loc[df['is_open'] == 1] self.trade_dates = list(df['cal_date']) self.date = 0 self.statistics = pd.DataFrame(columns=['date', 'cash', 'stock', 'total', 'rate', 'base']) def _produce_order_hand(self, o: dict, code: str, hand: float, price: float, buy_limit: 0.0): if hand == 0: return price *= 100 if hand &gt; 0: l, r = 0, hand while l &lt; r: m = (l + r + 1) // 2 if price * m + max(price * m * self.brokerage, 5) &lt;= buy_limit: l = m else: r = m - 1 hand = l cost = price * hand + max(price * hand * self.brokerage, 5) logging.info('%s交易成功,买入%d手,花去%f' % (str(o), int(hand), cost)) self.portfolio.update_position(code, hand) self.cash -= cost else: hand = -hand hand = int(min(hand, self.portfolio.get_position(code))) g = price * hand * (1 - self.duty) logging.info('%s交易成功,卖出%d手,得到%f' % (str(o), int(hand), g)) self.portfolio.update_position(code, -hand) self.cash += g def _produce_order(self, info: PortfolioInfo): for o in info.order: price = Util.get_price(o['code']) p = price.open(info.date) if 'hand' in o: self._produce_order_hand(o, o['code'], o['hand'], p, self.cash) elif 'cash' in o: self._produce_order_hand(o, o['code'], o['cash'] // (p * 100), p, o['cash']) else: logging.info('%s非法交易' % (str(o))) def _collect(self): info = PortfolioInfo(self.portfolio, self.start_date, self.end_date, self.trade_dates[self.date], self.cash) data = { 'date': self.trade_dates[self.date], 'cash': self.cash, 'stock': info.total_value(), 'total': self.cash + info.total_value(), 'rate': (self.cash + info.total_value()) / self.init_cash - 1, 'base': Util.get_base().get_base(self.start_date, self.trade_dates[self.date]) } self.statistics = self.statistics.append(data, ignore_index=True) logging.info(data) def _open(self, info: PortfolioInfo): self.date += 1 if self.date &gt;= len(self.trade_dates): return self._produce_order(info) self._collect() def _close(self): info = PortfolioInfo(self.portfolio, self.start_date, self.end_date, self.trade_dates[self.date], self.cash) self.strategy.on_close(info) self._open(info) def run(self): while self.date &lt; len(self.trade_dates): self._close() f = plt.figure() #ax1 = f.add_subplot() #ax1.plot(self.statistics.index, self.statistics['cash'], label='cash') #ax1.plot(self.statistics.index, self.statistics['stock'], label='stock') #ax1.plot(self.statistics.index, self.statistics['total'], label='total') #ax1.set_title('statistics') #plt.legend() #ax2 = ax1.twinx() def to_percent(temp, position): return '%.2f' % (100 * temp) + '%' #ax2.yaxis.set_major_formatter(FuncFormatter(to_percent)) plt.plot(self.statistics.index, self.statistics['rate'], label='rate') plt.plot(self.statistics.index, self.statistics['base'], label='base') plt.legend() plt.show() 工具类 基准类用于根据沪深300指数来做基准评估，价格类用于获取历史价格。 class Base: def __init__(self, code='ASHS'): file_name = code + &quot;.pkl&quot; if os.path.exists(file_name): self.df = pd.read_pickle(file_name) else: self.df: pd.DataFrame = pro.us_daily(ts_code=code, start_date='20190101', end_date='20210201') self.df = self.df.sort_values('trade_date') self.df.to_pickle(file_name) def get_base(self, start_date: str, end_date: str): y = list(self.df.loc[self.df['trade_date'] &lt;= end_date]['close'])[-1] x = list(self.df.loc[self.df['trade_date'] &lt;= start_date]['close'])[-1] print(start_date, end_date, x, y) return y/x-1 class Price: def __init__(self, code='000001.SZ'): self.code = code self.df: pd.DataFrame = pro.daily(ts_code=code, start_date='20190101', end_date='20210201') def close(self, item): return list(self.df.loc[self.df['trade_date'] == item]['close'])[0] def open(self, item): return list(self.df.loc[self.df['trade_date'] == item]['open'])[0] def get(self, end_date: str): return self.df.loc[self.df['trade_date'] &lt; end_date] 简单策略 这里随便搞了一个（没啥用）的策略，用于测试框架效果。 class MACDStrategy: def __init__(self): self.code = '000001.SZ' def on_close(self, info: PortfolioInfo): p = Util.get_price(self.code) df = p.get(info.date) df = df.sort_values('trade_date') df['ema12'] = df['close'].ewm(span=12).mean() df['ema26'] = df['close'].ewm(span=26).mean() df['diff'] = df['ema12'] - df['ema26'] df['dea'] = df['diff'].ewm(span=9).mean() df['histogram'] = df['diff'] - df['dea'] diff_list = list(df['diff']) if diff_list[-1] &gt; 0 &gt; diff_list[-2]: info.order_by_cash(self.code, info.avail_cash/2) elif diff_list[-1] &lt; 0 &lt; diff_list[-2]: info.order_by_cash(self.code, -info.total_value()/2) 执行效果 2021-02-14 15:51:04,669 - /Users/lizile/PycharmProjects/quant/main.py[line:165] - INFO: {'date': '20201215', 'cash': 314244.5519999999, 'stock': 818937.9999999999, 'total': 1133182.5519999997, 'rate': 0.13318255199999962, 'base': 0.2669077757685354} 2021-02-14 15:51:04,679 - /Users/lizile/PycharmProjects/quant/main.py[line:165] - INFO: {'date': '20201216', 'cash': 314244.5519999999, 'stock': 830737.0000000001, 'total': 1144981.5520000001, 'rate': 0.14498155200000018, 'base': 0.26039783001808336} 2021-02-14 15:51:04,689 - /Users/lizile/PycharmProjects/quant/main.py[line:165] - INFO: {'date': '20201217', 'cash': 314244.5519999999, 'stock': 828115.0, 'total': 1142359.552, 'rate': 0.14235955199999983, 'base': 0.2730560578661847} 2021-02-14 15:51:04,699 - /Users/lizile/PycharmProjects/quant/main.py[line:165] - INFO: {'date': '20201218', 'cash': 314244.5519999999, 'stock': 802332.0, 'total': 1116576.552, 'rate': 0.11657655199999994, 'base': 0.2600361663652804} 2021-02-14 15:51:04,709 - /Users/lizile/PycharmProjects/quant/main.py[line:165] - INFO: {'date': '20201221', 'cash': 314244.5519999999, 'stock': 798836.0, 'total': 1113080.552, 'rate': 0.113080552, 'base': 0.27377938517179023} 2021-02-14 15:51:04,719 - /Users/lizile/PycharmProjects/quant/main.py[line:165] - INFO: {'date': '20201222', 'cash': 314244.5519999999, 'stock': 782229.9999999999, 'total': 1096474.5519999997, 'rate': 0.09647455199999966, 'base': 0.2484629294755878} 2021-02-14 15:51:04,727 - /Users/lizile/PycharmProjects/quant/main.py[line:165] - INFO: {'date': '20201223', 'cash': 314244.5519999999, 'stock': 786600.0, 'total': 1100844.552, 'rate': 0.10084455199999987, 'base': 0.26075949367088613} 2021-02-14 15:51:04,735 - /Users/lizile/PycharmProjects/quant/main.py[line:165] - INFO: {'date': '20201224', 'cash': 314244.5519999999, 'stock': 797962.0000000001, 'total': 1112206.5520000001, 'rate': 0.11220655200000018, 'base': 0.24448462929475578} 2021-02-14 15:51:04,740 - /Users/lizile/PycharmProjects/quant/main.py[line:139] - INFO: {'code': '000001.SZ', 'cash': -398981.00000000006}交易成功,卖出220手,得到398900.700000 2021-02-14 15:51:04,744 - /Users/lizile/PycharmProjects/quant/main.py[line:165] - INFO: {'date': '20201225', 'cash': 713145.2519999999, 'stock': 391468.0, 'total': 1104613.2519999999, 'rate': 0.10461325199999982, 'base': 0.24448462929475578} 2021-02-14 15:51:04,756 - /Users/lizile/PycharmProjects/quant/main.py[line:165] - INFO: {'date': '20201228', 'cash': 713145.2519999999, 'stock': 409045.0, 'total': 1122190.2519999999, 'rate': 0.12219025199999978, 'base': 0.2484629294755878} 2021-02-14 15:51:04,769 - /Users/lizile/PycharmProjects/quant/main.py[line:165] - INFO: {'date': '20201229', 'cash': 713145.2519999999, 'stock': 415989.00000000006, 'total': 1129134.2519999999, 'rate': 0.12913425199999984, 'base': 0.24520795660036176} 2021-02-14 15:51:04,784 - /Users/lizile/PycharmProjects/quant/main.py[line:165] - INFO: {'date': '20201230', 'cash': 713145.2519999999, 'stock': 416639.99999999994, 'total': 1129785.2519999999, 'rate': 0.1297852519999998, 'base': 0.26039783001808336} 2021-02-14 15:51:04,793 - /Users/lizile/PycharmProjects/quant/main.py[line:132] - INFO: {'code': '000001.SZ', 'cash': 356572.62599999993}交易成功,买入187手,花去355388.825000 2021-02-14 15:51:04,800 - /Users/lizile/PycharmProjects/quant/main.py[line:165] - INFO: {'date': '20201231', 'cash': 357756.42699999985, 'stock': 781336.0, 'total': 1139092.427, 'rate': 0.13909242700000002, 'base': 0.27667269439421327} 完整代码 import logging from functools import lru_cache import os import tushare as ts import pandas as pd from matplotlib import pyplot as plt import collections from matplotlib.ticker import FuncFormatter logging.basicConfig(format='%(asctime)s - %(pathname)s[line:%(lineno)d] - %(levelname)s: %(message)s', level=logging.INFO) token = '???' ts.set_token(token) pro = ts.pro_api() class Base: def __init__(self, code='ASHS'): file_name = code + &quot;.pkl&quot; if os.path.exists(file_name): self.df = pd.read_pickle(file_name) else: self.df: pd.DataFrame = pro.us_daily(ts_code=code, start_date='20190101', end_date='20210201') self.df = self.df.sort_values('trade_date') self.df.to_pickle(file_name) def get_base(self, start_date: str, end_date: str): y = list(self.df.loc[self.df['trade_date'] &lt;= end_date]['close'])[-1] x = list(self.df.loc[self.df['trade_date'] &lt;= start_date]['close'])[-1] #print(start_date, end_date, x, y) return y/x-1 class Price: def __init__(self, code='000001.SZ'): self.code = code self.df: pd.DataFrame = pro.daily(ts_code=code, start_date='20190101', end_date='20210201') def close(self, item): return list(self.df.loc[self.df['trade_date'] == item]['close'])[0] def open(self, item): return list(self.df.loc[self.df['trade_date'] == item]['open'])[0] def get(self, end_date: str): return self.df.loc[self.df['trade_date'] &lt; end_date] class Util: @staticmethod @lru_cache(maxsize=None) def get_price(code='000001.SZ') -&gt; Price: return Price(code) @staticmethod @lru_cache(maxsize=None) def get_base(code='ASHS') -&gt; Base: return Base(code) class Portfolio: def __init__(self): self.position = collections.defaultdict(int) def update_position(self, code='000001.SZ', hand=100): self.position[code] += hand def get_position(self, code='000001.SZ'): return self.position[code] class PortfolioInfo: def __init__(self, portfolio: Portfolio, start_date: str, end_date: str, date: str, avail_cash: float): self.position = {} for k, v in portfolio.position.items(): self.position[k] = {'hand': v, 'value': Util.get_price(k).close(date) * v * 100} self.avail_cash = avail_cash self.order = [] self.date = date self.start_date = start_date self.end_date = end_date def total_value(self) -&gt; float: res = 0 for k, v in self.position.items(): res += v['value'] return res def rate(self) -&gt; float: return self.total_value() / (self.avail_cash + self.total_value()) def order_by_hand(self, code='000001.SZ', hand=100.): self.order.append({&quot;code&quot;: code, &quot;hand&quot;: hand}) def order_by_cash(self, code='000001.SZ', cash=10000.): self.order.append({&quot;code&quot;: code, &quot;cash&quot;: cash}) class Simulator: def __init__(self, strategy, init_cash=100000., start_date='20200101', end_date='20210101', duty=0.001, brokerage=0.00025): self.init_cash = init_cash self.cash = init_cash self.start_date = start_date self.end_date = end_date self.duty = duty self.brokerage = brokerage self.strategy = strategy self.portfolio = Portfolio() df: pd.DataFrame = pro.trade_cal(start_date=start_date, end_date=end_date) df = df.loc[df['is_open'] == 1] self.trade_dates = list(df['cal_date']) self.date = 0 self.statistics = pd.DataFrame(columns=['date', 'cash', 'stock', 'total', 'rate', 'base']) def _produce_order_hand(self, o: dict, code: str, hand: float, price: float, buy_limit: 0.0): if hand == 0: return price *= 100 if hand &gt; 0: l, r = 0, hand while l &lt; r: m = (l + r + 1) // 2 if price * m + max(price * m * self.brokerage, 5) &lt;= buy_limit: l = m else: r = m - 1 hand = l cost = price * hand + max(price * hand * self.brokerage, 5) logging.info('%s交易成功,买入%d手,花去%f' % (str(o), int(hand), cost)) self.portfolio.update_position(code, hand) self.cash -= cost else: hand = -hand hand = int(min(hand, self.portfolio.get_position(code))) g = price * hand * (1 - self.duty) logging.info('%s交易成功,卖出%d手,得到%f' % (str(o), int(hand), g)) self.portfolio.update_position(code, -hand) self.cash += g def _produce_order(self, info: PortfolioInfo): for o in info.order: price = Util.get_price(o['code']) p = price.open(info.date) if 'hand' in o: self._produce_order_hand(o, o['code'], o['hand'], p, self.cash) elif 'cash' in o: self._produce_order_hand(o, o['code'], o['cash'] // (p * 100), p, o['cash']) else: logging.info('%s非法交易' % (str(o))) def _collect(self): info = PortfolioInfo(self.portfolio, self.start_date, self.end_date, self.trade_dates[self.date], self.cash) data = { 'date': self.trade_dates[self.date], 'cash': self.cash, 'stock': info.total_value(), 'total': self.cash + info.total_value(), 'rate': (self.cash + info.total_value()) / self.init_cash - 1, 'base': Util.get_base().get_base(self.start_date, self.trade_dates[self.date]) } self.statistics = self.statistics.append(data, ignore_index=True) logging.info(data) def _open(self, info: PortfolioInfo): self.date += 1 if self.date &gt;= len(self.trade_dates): return self._produce_order(info) self._collect() def _close(self): info = PortfolioInfo(self.portfolio, self.start_date, self.end_date, self.trade_dates[self.date], self.cash) self.strategy.on_close(info) self._open(info) def run(self): while self.date &lt; len(self.trade_dates): self._close() f = plt.figure() #ax1 = f.add_subplot() #ax1.plot(self.statistics.index, self.statistics['cash'], label='cash') #ax1.plot(self.statistics.index, self.statistics['stock'], label='stock') #ax1.plot(self.statistics.index, self.statistics['total'], label='total') #ax1.set_title('statistics') #plt.legend() #ax2 = ax1.twinx() def to_percent(temp, position): return '%.2f' % (100 * temp) + '%' #ax2.yaxis.set_major_formatter(FuncFormatter(to_percent)) plt.plot(self.statistics.index, self.statistics['rate'], label='rate') plt.plot(self.statistics.index, self.statistics['base'], label='base') plt.legend() plt.show() class MACDStrategy: def __init__(self): self.code = '000001.SZ' def on_close(self, info: PortfolioInfo): p = Util.get_price(self.code) df = p.get(info.date) df = df.sort_values('trade_date') df['ema12'] = df['close'].ewm(span=12).mean() df['ema26'] = df['close'].ewm(span=26).mean() df['diff'] = df['ema12'] - df['ema26'] df['dea'] = df['diff'].ewm(span=9).mean() df['histogram'] = df['diff'] - df['dea'] diff_list = list(df['diff']) if diff_list[-1] &gt; 0 &gt; diff_list[-2]: info.order_by_cash(self.code, info.avail_cash/2) elif diff_list[-1] &lt; 0 &lt; diff_list[-2]: info.order_by_cash(self.code, -info.total_value()/2) if __name__ == '__main__': strategy = MACDStrategy() s = Simulator(strategy, 1000000) s.run() ","link":"https://InsZVA.github.io/post/da-zao-ben-di-liang-hua-hui-ce-kuang-jia/"},{"title":"对冲基金的收益来源","content":" 在股市里面，如果你不知道谁是韭菜，那么你就是韭菜 证明：对于任意一笔交易，无论是你买了股票，还是卖了股票，你买/卖的时刻一定是有人在以同样的价格卖/买，如果你不明白这里面的奥妙，那么有可能有别人明白，而明白奥妙的人却做着跟你相反的操作，这不是很明显你是韭菜吗？ 那么，对冲基金的收益到底来源于哪里呢？有2部分组成：信息收益和流动性风险收益。 信息收益 制造信息 对冲基金经常收集和制造一些信息，例如收集市场上大量公司的财务信息等，并产出自己对每支股票的分析信息。这些信息可以对基金自己所看多的公司产生向好的建议，以及引导投资者看多。这是第一种信息收益。 获取信息 虽然内幕交易是违法的，但是总而言之，总有一些信息不可能是瞬间被所有投资者知道的，即市场不可能完美高效。如果能更快知道一些信息，一定是有收益的。 套利行为 股票的价格在一些时候并不是完全聚合了所有相关信息的体现，例如公司发布财报等，一般对股票的影响会是一个趋势，而且这个趋势会持续一段时间。而且市场上存在很多投机者，投机者由于自身的流动性风险以及投机心理（追涨杀跌等）导致他们不会立即修正股票的价格，所以会有一段时间的价格偏差，这就存在收益空间。 流动性风险 市场流动性风险 流动性较差的股票，往往会卖更低的价格，因为买股票的人担心买了之后出不了，所以要更低的价格才愿意。另外，在流动性较低的时候，买股票的人和卖股票的人的报价可能会有差距，一部分高频交易者，便是通过高频吸抛，为市场提供流动性，同时自身承担流动性风险，但获得收益。 基金流动性风险 一些股票融资困难，因为他们有较高保证金要求，资本受限的投资者通过基金购买，所以基金可以获得收益。 为巨大的需求压力提供流动性 如果一个股票不寻常地面临大量购买压力，它的价格被抬高，那么意味着它在未来会回报非常低，而其他的股票会被抛弃，导致拥有低价格和高回报。在这种情况下，可以做到低吸高抛。 ","link":"https://InsZVA.github.io/post/dui-chong-ji-jin-de-shou-yi-lai-yuan/"},{"title":"后缀数组的应用理解","content":"前言 字符串一直是短板，之前遇到字符串都是直接跳过，也曾经尝试多次去学习后缀数组，每次都是扫完全文但是不懂。最近终于可以自己用后缀数组去过题目了，简单记录下理解。 构建 构建部分主要是倍增的思想，和一些贪心？结论，具体可以参见OI-wiki,这里就不再赘述。 理解 假设你需要在一个数组中匹配是否出现一个数字，以及这个数字出现了几次，可以采用哈希的方法，也可以采用排序数组的方法。同样，对于一堆字符串，你也可以通过哈希，或者排序数组的方法来解决这类问题。 如果这一堆字符串是一个字符串的所有子串，直接存储O(n)O(n)O(n)个子串需要O(n3)O(n^3)O(n3)的时空复杂度，即使采用哈希也只能降到(O(n2))(O(n^2))(O(n2))。后缀数组就是用下标i来代替整个后缀S[i:]，使得存储只需要O(n)O(n)O(n)复杂度，构建只需要少于O(nlog⁡(n))O(n\\log(n))O(nlog(n))复杂度。但是\b只存后缀怎么来解决对所有子串的操作呢？ 假设我们有一个字符串aabaaaab，他的后缀分别是： aabaaaab abaaaab baaaab aaaab aaab aab ab b 对它们进行排序： aaaab aaab aab aabaaaab ab abaaaab b baaaab 任何一个子串一定是某个后缀的前缀，由于字符串排序实质就是前缀去做比较，所以后缀的排序其实跟所有子串的排序有关，如下： aaaab: a &lt; aa &lt; aaa &lt; aaaa &lt; aaaab aaab: a &lt; aa &lt; aaa &lt; aaab aab: a &lt; aa &lt; aab aabaaaab: a &lt; aa &lt; aab &lt; aaba &lt; aabaa &lt; aabaaa &lt; aabaaaa &lt; aabaaaab ab: a &lt; ab abaaaab: a &lt; ab &lt; aba &lt; abaa &lt; abaaa &lt; abaaaa &lt; abaaaab b: b baaaab: b &lt; ba &lt; baa &lt; baaa &lt; baaaa &lt; baaaab 但是可以看到，后缀的排序并不完全等于子串的排序，如果我们想知道子串的排序，应该怎么做呢？可以发现对于前3项： aaaab: a &lt; aa &lt; aaa &lt; aaaa &lt; aaaab aaab: a &lt; aa &lt; aaa &lt; aaab aab: a &lt; aa &lt; aab a和aa这两个子串同时出现在了前3项里面，aaa出现在了前2项里面，与aaa同一列的第3项是aab，aab&gt;aaa。同样可以发现，相邻两个后缀之间有一部分前缀是完全相同的，我们认为这些相同的子串实际在排序中的位置是第一次出现的位置（例如aa应该是第1行第2列），那么我们就得到了所有子串的排序所需要的全部信息。这就是后缀数组的本质：得到所有子串的排序信息。 为了高效处理相邻的两个后缀之间的相同前缀，我们得到了height数组，height[i]=lcp(sa[i-1]. sa[1])，即height数组存了每个后缀和他之前后缀的最长公共前缀。这个height名字取得也很形象，拿上面3项来说： b a b a a b a a a a a a 0 3 2 我们看到height[2]=3,代表了第2个后缀aaab的前缀a和aa和aaa前一项也存在, height[3]=2代表了a和aa在前一个后缀中也存在。这和高度有啥关系呢？在这个例子里面，除去第一项的高度（因为它和空串在做对比）别的都是&gt;=2的，意味着aa及aa的所有前缀存在于所有的后缀中。而对于height[2]=3但是height[3]=2，高度降低了1，意味着aaa这个前缀，在第3个子串之前消失了。 可以发现，所有height记录的都是出现超过1次的子串信息，将这个数组列成直方图： + + + + + + + + + + + + 我们以行视角来看，最底下一行连续出现了5次，然后断开，然后又出现了1次。左边的连续5个代表了a这个子串出现了5+1次，右边的1个代表了b这个子串出现了1次。我们查看原串aabaaaab，的确如此，a出现了6次，b出现了2次。同样我们可以看到高度为2的最开始出现了3次，代表aa这个子串出现了4次。所以**height数组存储了所有出现超过1次的子串的频数信息**。 这里举个应用的例子，我想知道一个字符串里面不同的子串有多少个。每个height[i]=x的代表有x个子串（即S[i:][:x]的所有前缀）在之前已经存在过了，所以我们可以用所有的子串数量n*(n+1)/2减去所有height的和即可得到。 那如果我想知道所有仅出现过一次的不同子串有多少个要怎么做呢？对于S[i:]这个后缀，它和之前之后后缀的LCP，都是不满足的，超过2个LCP的全部满足。所以S[i:]这个后缀的所有只出现过一次的不同子串是len(S[i:])-max(height[i], height[i+1])。全部加起来即可。 如果是想知道所有出现次数为x的子串有多少个要怎么做呢，回到直方图，一行一行来看，第i行连续的长度就是长度为i的子串的出现次数-1。这个就是直方图里面的面积统计，可以用单调栈来做，也可以用分治法来做。我觉得这个单调栈好难写，所以一直都是ST表然后用分治法去做。这里我们可以看出来height数组的名字就是说它可以转为直方图里面的高度，而height数组存储了所有超过1次的子串的频数信息。对于所有子串去统计一些跟子串长度/数量有关系的题目，大多就是这样去做，转化成直方图里面的处理。 ","link":"https://InsZVA.github.io/post/hou-zhui-shu-zu-de-ying-yong-li-jie/"},{"title":"Hello Gridea","content":"👏 欢迎使用 Gridea ！ ✍️ Gridea 一个静态博客写作客户端。你可以用它来记录你的生活、心情、知识、笔记、创意... ... Github Gridea 主页 示例网站 特性👇 📝 你可以使用最酷的 Markdown 语法，进行快速创作 🌉 你可以给文章配上精美的封面图和在文章任意位置插入图片 🏷️ 你可以对文章进行标签分组 📋 你可以自定义菜单，甚至可以创建外部链接菜单 💻 你可以在 Windows，MacOS 或 Linux 设备上使用此客户端 🌎 你可以使用 𝖦𝗂𝗍𝗁𝗎𝖻 𝖯𝖺𝗀𝖾𝗌 或 Coding Pages 向世界展示，未来将支持更多平台 💬 你可以进行简单的配置，接入 Gitalk 或 DisqusJS 评论系统 🇬🇧 你可以使用中文简体或英语 🌁 你可以任意使用应用内默认主题或任意第三方主题，强大的主题自定义能力 🖥 你可以自定义源文件夹，利用 OneDrive、百度网盘、iCloud、Dropbox 等进行多设备同步 🌱 当然 Gridea 还很年轻，有很多不足，但请相信，它会不停向前 🏃 未来，它一定会成为你离不开的伙伴 尽情发挥你的才华吧！ 😘 Enjoy~ ","link":"https://InsZVA.github.io/post/hello-gridea/"}]}